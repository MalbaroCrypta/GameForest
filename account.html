<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GameForest — Account</title>
  <meta name="description" content="GameForest account dashboard" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='18' fill='%234c7dff'/><text x='50' y='62' text-anchor='middle' font-size='56' fill='white' font-family='Arial' font-weight='bold'>GF</text></svg>">
  <link rel="stylesheet" href="./styles.css?v=3" />
</head>
<body data-page="account">
  <header class="topbar">
    <div class="topbar__left">
      <button class="iconbtn iconbtn--bare" id="btnMenu" title="Menu">☰</button>
      <a class="brand" href="index.html">
        <div class="brand__logo">GF</div>
        <div class="brand__name">GameForest</div>
      </a>
      <nav class="topnav">
        <a class="topnav__btn" data-page="catalog" href="index.html" data-i18n="navCatalog">Каталог</a>
        <a class="topnav__btn" data-page="market" href="market.html" data-i18n="navMarket">Маркетплейс</a>
        <a class="topnav__btn" data-page="about" href="about.html" data-i18n="navAbout">Про проєкт</a>
        <a class="topnav__btn is-active" data-page="account" href="account.html" data-i18n="navAccount">Мій акаунт</a>
      </nav>
    </div>
    <div class="topbar__center"></div>
    <div class="topbar__right">
      <button class="chip chip--ghost" id="langToggle" title="UA / EN">UA</button>
      <div class="userpill" id="userToggle" role="button" tabindex="0">
        <div class="avatar" aria-hidden="true" id="userAvatar">
          <img id="userAvatarImg" alt="" hidden>
          <svg viewBox="0 0 40 40" role="presentation" focusable="false">
            <circle cx="20" cy="14" r="9" class="avatar__face"></circle>
            <rect x="8" y="24" width="24" height="10" rx="5" class="avatar__body"></rect>
          </svg>
        </div>
        <div class="userpill__meta">
          <div class="userpill__email" id="userMenuEmail">guest@gameforest.app</div>
          <div class="userpill__hint" data-i18n="navAccount">Мій акаунт</div>
        </div>
        <span class="chevron">▾</span>
      </div>
      <div class="auth">
        <span class="auth__user" id="userBadge" hidden></span>
        <button class="btn btn--ghost" id="btnLogin" data-i18n="login">Увійти</button>
        <button class="btn btn--primary" id="btnRegister" data-i18n="register">Реєстрація</button>
        <button class="btn btn--ghost" id="btnLogout" hidden data-i18n="logout">Вийти</button>
      </div>
    </div>
  </header>
  <div class="dropdown hidden" id="userDropdown">
    <a class="dropdown__item" href="account.html" data-i18n="navAccount">Мій акаунт</a>
    <button class="dropdown__item" type="button" data-go="wishlist" data-i18n="wishlist">Wishlist</button>
    <button class="dropdown__item" type="button" data-go="cart" data-i18n="cart">Кошик</button>
    <button class="dropdown__item" type="button" data-open="pitch" data-i18n="pitchBtn">Pitch deck</button>
    <button class="dropdown__item" type="button" id="dropdownLogout" data-i18n="logout">Вийти</button>
  </div>
  <div class="drawer" id="navDrawer">
    <div class="drawer__backdrop" data-close="drawer"></div>
    <aside class="drawer__panel">
      <div class="drawer__head">
        <div class="drawer__title" data-i18n="drawerTitle">Швидке меню</div>
        <button class="iconbtn iconbtn--bare" data-close="drawer">✕</button>
      </div>
      <div class="drawer__links">
        <a href="index.html" data-page="catalog" data-i18n="navCatalog">Каталог</a>
        <a href="market.html" data-page="market" data-i18n="navMarket">Маркетплейс</a>
        <a href="about.html" data-page="about" data-i18n="navAbout">Про проєкт</a>
        <a href="account.html" data-page="account" data-i18n="navAccount">Мій акаунт</a>
      </div>
      <div class="drawer__actions">
        <button class="btn btn--ghost w100" data-drawer="wishlist" data-i18n="wishlist">Wishlist</button>
        <button class="btn btn--ghost w100" data-drawer="compare" data-i18n="compareBtn">Compare</button>
        <button class="btn btn--ghost w100" data-open="pitch" data-i18n="pitchBtn">Pitch deck</button>
      </div>
    </aside>
  </div>

  <main class="layout">
    <section class="hero hero--xl hero--grid">
      <div>
        <div class="hero__eyebrow" data-i18n="accountEyebrow">Кабінет користувача</div>
        <div class="hero__title" data-i18n="accountTitle">My Account</div>
        <div class="hero__sub" id="accountEmail">guest@gameforest.app</div>
        <div class="hero__meta">
          <span class="pill"><span data-i18n="wishlist"></span>: <strong id="wishCount">0</strong></span>
          <span class="pill"><span data-i18n="cart"></span>: <strong id="cartCount">0</strong></span>
          <span class="pill"><span data-i18n="compareBtn"></span>: <strong id="compareCount">0</strong></span>
        </div>
      </div>
      <div class="hero__kpis">
        <div class="kpi kpi--line">
          <div class="kpi__lbl" data-i18n="statsViewed">Переглянуті ігри</div>
          <div class="kpi__num" id="statViewed">0</div>
          <div class="kpi__hint" data-i18n="accountViewedHint">рахується з деталей</div>
        </div>
        <div class="kpi kpi--line">
          <div class="kpi__lbl" data-i18n="statsSaved">Збережені</div>
          <div class="kpi__num" id="statSaved">0</div>
          <div class="kpi__hint" data-i18n="accountSavedHint">wishlist</div>
        </div>
        <div class="kpi kpi--line">
          <div class="kpi__lbl" data-i18n="statsCompared">Compare</div>
          <div class="kpi__num" id="statCompared">0</div>
          <div class="kpi__hint" data-i18n="accountComparedHint">до 4 позицій</div>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel__body">
        <div class="owner" style="margin-bottom:10px;">
          <div class="owner__avatar avatar--image" id="heroAvatar">GF</div>
          <div>
            <div class="owner__name" id="accountPrimaryEmail">guest@gameforest.app</div>
            <div class="owner__meta" data-i18n="profileHeroMeta">Supabase session · wishlist / cart · avatar</div>
          </div>
        </div>
        <div class="statrow statrow--inline">
          <div class="statcard">
            <div class="statcard__label" data-i18n="wishlist">Wishlist</div>
            <div class="statcard__value" id="accountWish">0</div>
            <div class="statcard__hint">синхронізовано з каталогом</div>
          </div>
          <div class="statcard">
            <div class="statcard__label" data-i18n="cart">Кошик</div>
            <div class="statcard__value" id="accountCart">0</div>
            <div class="statcard__hint">готово до маркетплейсу</div>
          </div>
          <div class="statcard">
            <div class="statcard__label" data-i18n="compareBtn">Compare</div>
            <div class="statcard__value" id="accountCompare">0</div>
            <div class="statcard__hint">до 4 позицій для перевірки</div>
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="wishlistSection">
      <div class="panel__head">
        <div class="panel__title" data-i18n="wishlist">Wishlist</div>
        <div class="panel__muted" data-i18n="wishlistHint">Збережені ігри з каталогу.</div>
      </div>
      <div class="panel__body" id="wishlistList"></div>
    </section>

    <section class="panel">
      <div class="panel__head">
        <div class="panel__title" data-i18n="profileTitle">Профіль користувача</div>
        <div class="panel__muted" data-i18n="profileHint">Аватар і біо зберігаються у Supabase.</div>
      </div>
      <div class="panel__body profilecard">
        <div class="profilecard__left">
          <div class="avatar avatar--xl" id="profileAvatar">GF</div>
          <div class="muted profile__status" id="profileStatus"></div>
          <div class="profilecard__upload">
            <div class="avatar avatar--preview" id="profileAvatarPreview">GF</div>
            <div class="profilecard__actions">
              <label class="chip chip--ghost" for="profileAvatarInput" data-i18n="uploadAvatar">Завантажити аватар</label>
              <input type="file" id="profileAvatarInput" accept="image/*" hidden>
            </div>
          </div>
        </div>
        <div class="profilecard__form">
          <div class="field">
            <label class="label" for="profileBio" data-i18n="bioLabel">Біографія</label>
            <textarea class="input input--textarea" id="profileBio" placeholder="Додайте коротку біографію"></textarea>
          </div>
          <div class="profilecard__footer">
            <div class="muted" id="profileGuard" data-i18n="profileRequiresLogin">Увійдіть, щоб зберегти профіль.</div>
            <button class="btn btn--primary" id="profileSave" type="button" data-i18n="saveProfile">Зберегти профіль</button>
          </div>
        </div>
      </div>
    </section>

    <section class="panel" id="cartSection">
      <div class="panel__head">
        <div class="panel__title" data-i18n="cart">Кошик</div>
        <div class="panel__muted" data-i18n="cartHint">Підготовлено до майбутніх покупок / маркетплейсу.</div>
      </div>
      <div class="panel__body" id="cartList"></div>
    </section>
  </main>

  <div class="modal hidden" id="authModal">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__card">
      <div class="modal__head">
        <div class="modal__title" id="authTitle">Auth</div>
        <button class="iconbtn" data-close="1">✕</button>
      </div>
      <div class="modal__body" id="authBody"></div>
    </div>
  </div>

  <div class="modal hidden" id="pitchModal">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__card modal__card--wide">
      <div class="modal__head">
        <div class="modal__title" id="pitchTitle">Pitch deck</div>
        <button class="iconbtn" data-close="1">✕</button>
      </div>
      <div class="modal__body" id="pitchBody"></div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="site-footer__wrap">
      <div class="footer__brand">
        <div class="brand__logo">GF</div>
        <div>
          <div class="footer__title">© GameForest — All rights reserved</div>
          <div class="footer__disclaimer" data-i18n="footerDisclaimer">Стабільні обкладинки SteamStatic. Дані кешуються, продакшен-розгортання не потребує сторонніх залежностей.</div>
        </div>
      </div>
      <div>
        <div class="footer__payments">
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#7cc8ff" font-weight="700" font-size="10">VISA</text></svg>Visa</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#f4c16c" font-weight="700" font-size="10">MC</text></svg>MasterCard</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#7cc8ff" font-weight="700" font-size="10">PP</text></svg>PayPal</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#52c99f" font-weight="700" font-size="10">₿</text></svg>Crypto</span>
        </div>
        <div class="footer__legal">Офіційний вигляд акаунта: аватар, wishlist, кошик, compare, збереження локальної сесії.</div>
      </div>
    </div>
  </footer>

  <script src="./i18n.js"></script>
  <script src="./supabase-config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.44.4/dist/umd/supabase.min.js"></script>
  <script src="./auth.js"></script>
  <script src="./shell.js"></script>
  <script src="./data.js"></script>
  <script src="./account.js"></script>
</body>
</html>
