<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GameForest ‚Äî Marketplace</title>
  <meta name="description" content="Marketplace and balance top-ups in a production-ready layout." />
  <meta name="keywords" content="marketplace, top-up" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='18' fill='%234c7dff'/><text x='50' y='62' text-anchor='middle' font-size='56' fill='white' font-family='Arial' font-weight='bold'>GF</text></svg>">
  <link rel="stylesheet" href="./styles.css?v=3" />
</head>
<body data-page="market">
  <header class="topbar">
    <div class="topbar__left">
      <button class="iconbtn iconbtn--bare" id="btnMenu" title="Menu">‚ò∞</button>
      <a class="brand" href="index.html">
        <div class="brand__logo">GF</div>
        <div class="brand__name">GameForest</div>
      </a>
      <nav class="topnav">
        <a class="topnav__btn" data-page="catalog" href="index.html" data-i18n="navCatalog">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a class="topnav__btn" data-page="market" href="market.html" data-i18n="navMarket">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
        <a class="topnav__btn" data-page="about" href="about.html" data-i18n="navAbout">–ü—Ä–æ –ø—Ä–æ—î–∫—Ç</a>
        <a class="topnav__btn" data-page="account" href="account.html" data-i18n="navAccount">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>
      </nav>
    </div>
    <div class="topbar__center"></div>
    <div class="topbar__right">
      <button class="chip chip--ghost" id="langToggle" title="UA / EN">UA</button>
      <div class="userpill" id="userToggle" role="button" tabindex="0">
        <div class="avatar" aria-hidden="true" id="userAvatar">
          <img id="userAvatarImg" alt="" hidden>
          <svg viewBox="0 0 40 40" role="presentation" focusable="false">
            <circle cx="20" cy="14" r="9" class="avatar__face"></circle>
            <rect x="8" y="24" width="24" height="10" rx="5" class="avatar__body"></rect>
          </svg>
        </div>
        <div class="userpill__meta">
          <div class="userpill__email" id="userMenuEmail">guest@gameforest.app</div>
          <div class="userpill__hint" data-i18n="navAccount">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</div>
        </div>
        <span class="chevron">‚ñæ</span>
      </div>
      <div class="auth">
        <span class="auth__user" id="userBadge" hidden></span>
        <button class="btn btn--ghost" id="btnLogin" data-i18n="login">–£–≤—ñ–π—Ç–∏</button>
        <button class="btn btn--primary" id="btnRegister" data-i18n="register">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
        <button class="btn btn--ghost" id="btnLogout" hidden data-i18n="logout">–í–∏–π—Ç–∏</button>
      </div>
    </div>
  </header>
  <div class="dropdown hidden" id="userDropdown">
    <a class="dropdown__item" href="account.html" data-i18n="navAccount">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>
    <button class="dropdown__item" type="button" data-go="wishlist" data-i18n="wishlist">Wishlist</button>
    <button class="dropdown__item" type="button" data-go="cart" data-i18n="cart">–ö–æ—à–∏–∫</button>
    <button class="dropdown__item" type="button" data-open="pitch" data-i18n="pitchBtn">Pitch</button>
    <button class="dropdown__item" type="button" id="dropdownLogout" data-i18n="logout">–í–∏–π—Ç–∏</button>
  </div>
  <div class="drawer" id="navDrawer">
    <div class="drawer__backdrop" data-close="drawer"></div>
    <aside class="drawer__panel">
      <div class="drawer__head">
        <div class="drawer__title" data-i18n="drawerTitle">–®–≤–∏–¥–∫–µ –º–µ–Ω—é</div>
        <button class="iconbtn iconbtn--bare" data-close="drawer">‚úï</button>
      </div>
      <div class="drawer__links">
        <a href="index.html" data-page="catalog" data-i18n="navCatalog">–ö–∞—Ç–∞–ª–æ–≥</a>
        <a href="market.html" data-page="market" data-i18n="navMarket">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å</a>
        <a href="about.html" data-page="about" data-i18n="navAbout">–ü—Ä–æ –ø—Ä–æ—î–∫—Ç</a>
        <a href="account.html" data-page="account" data-i18n="navAccount">–ú—ñ–π –∞–∫–∞—É–Ω—Ç</a>
      </div>
      <div class="drawer__actions">
        <button class="btn btn--ghost w100" data-drawer="wishlist" data-i18n="wishlist">Wishlist</button>
        <button class="btn btn--ghost w100" data-drawer="compare" data-i18n="compareBtn">Compare</button>
        <button class="btn btn--ghost w100" data-open="pitch" data-i18n="pitchBtn">Pitch</button>
      </div>
    </aside>
  </div>

  <main class="layout">
    <section class="hero">
      <div class="hero__eyebrow">üí∞ Marketplace desk</div>
      <div class="hero__title" data-i18n="heroMarketTitle">–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å / Top-up</div>
      <div class="hero__sub" data-i18n="heroMarketSub">–ü–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –±–∞–ª–∞–Ω—Å—ñ–≤ —Ç–∞ —Ü–∏—Ñ—Ä–æ–≤—ñ –ø—Ä–µ–¥–º–µ—Ç–∏ —É –ø—Ä–æ–¥–∞–∫—à–Ω-–æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ.</div>
      <div class="hero__meta">
        <span class="pill pill--glow pill--icon">üí∞ Robux</span>
        <span class="pill pill--icon">üéØ CS2 skins</span>
        <span class="pill pill--icon">üì¶ CS2 cases</span>
        <span class="pill pill--icon">üìà User context</span>
      </div>
    </section>

    <section class="panel">
      <div class="panel__body statrow statrow--inline">
        <div class="statcard">
          <div class="statcard__label">Account email</div>
          <div class="statcard__value" id="marketUserEmail">guest@gameforest.app</div>
          <div class="statcard__hint">Avatar —É —Ö–µ–¥–µ—Ä—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞</div>
        </div>
        <div class="statcard">
          <div class="statcard__label" data-i18n="wishlist">Wishlist</div>
          <div class="statcard__value" id="marketWishCount">0</div>
          <div class="statcard__hint">—Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑ –∫–∞—Ç–∞–ª–æ–≥–æ–º</div>
        </div>
        <div class="statcard">
          <div class="statcard__label" data-i18n="cart">–ö–æ—à–∏–∫</div>
          <div class="statcard__value" id="marketCartCount">0</div>
          <div class="statcard__hint">–≥–æ—Ç–æ–≤–æ –¥–ª—è checkout</div>
        </div>
      </div>
    </section>

    <section class="panel">
      <div class="panel__head">
        <div>
          <div class="panel__title">–í–µ—Ä—Ç–∏–∫–∞–ª—ñ</div>
          <div class="panel__muted">–†–µ–∞–ª—å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ª–æ—Ç—ñ–≤: Robux, CS2 Skins, CS2 Cases.</div>
        </div>
      </div>
      <div class="panel__body cardgrid cardgrid--tiles">
        <div class="card card--accent">
          <div class="card__head">
            <div class="card__title">Roblox Robux</div>
            <span class="pill pill--icon">üí∞</span>
          </div>
          <div class="card__desc">–¢–æ–ø-–∞–ø –ø–∞–∫–µ—Ç–∏ (800‚Äì10 000) –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º–∏ –∫—É—Ä—Å–∞–º–∏, –≥–æ—Ç–æ–≤—ñ –¥–ª—è –æ–ø–ª–∞—Ç–∏.</div>
        </div>
        <div class="card">
          <div class="card__head">
            <div class="card__title">CS2 Skins</div>
            <span class="pill pill--icon">üéØ</span>
          </div>
          <div class="card__desc">AWP Dragon Lore, Prime Karambit —Ç–∞ —ñ–Ω—à—ñ —Å–∫—ñ–Ω–∏ –∑ –ø–æ–∑–Ω–∞—á–∫–æ—é Verified seller.</div>
        </div>
        <div class="card">
          <div class="card__head">
            <div class="card__title">CS2 Cases</div>
            <span class="pill pill--icon">üì¶</span>
          </div>
          <div class="card__desc">–ö–æ–ª–µ–∫—Ü—ñ—ó Horizon/Mirage —ñ–∑ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º –≤–∞–ª—é—Ç–∏ —Ç–∞ –º–∏—Ç—Ç—î–≤–æ—é –∫–Ω–æ–ø–∫–æ—é ¬´–ö—É–ø–∏—Ç–∏¬ª.</div>
        </div>
      </div>
    </section>

    <div class="tablist" role="tablist">
      <button class="tabbtn is-active" data-tab="topup" data-i18n="topupTab">Top-up</button>
      <button class="tabbtn" data-tab="market" data-i18n="marketplaceTab">Marketplace</button>
    </div>

    <section class="panel" data-panel="topup">
      <div class="panel__head">
        <div class="panel__left">
          <div class="panel__title" data-i18n="topupTest">Checkout sandbox</div>
          <div class="panel__muted" data-i18n="topupNote">–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –ø–æ—Ç—Ä—ñ–±–µ–Ω –±–µ–∫–µ–Ω–¥ (Vercel/Netlify/Firebase) –∑ endpoint –¥–ª—è Stripe session.</div>
        </div>
      </div>
      <div class="panel__body grid grid--2">
        <div class="formblock">
          <div class="field">
            <label class="label" data-i18n="topupService">–ì—Ä–∞/—Å–µ—Ä–≤—ñ—Å</label>
            <select id="serviceSelect" class="select"></select>
          </div>
          <div class="field">
            <label class="label" data-i18n="topupRegion">–†–µ–≥—ñ–æ–Ω</label>
            <select id="regionSelect" class="select"></select>
          </div>
          <div class="field">
            <label class="label" data-i18n="topupAmount">–°—É–º–∞ –ø–æ–ø–æ–≤–Ω–µ–Ω–Ω—è</label>
            <select id="amountSelect" class="select"></select>
          </div>
          <div class="field">
            <label class="label" data-i18n="topupCustomAmount">–ê–±–æ –≤–≤–µ–¥—ñ—Ç—å —Å—É–º—É</label>
            <input id="customAmount" class="input" type="number" min="0" step="1" placeholder="25" />
          </div>
          <div class="field">
            <label class="label">Checkout</label>
            <div class="radiolist">
              <label><input type="radio" name="checkoutMode" value="sandbox" checked> Sandbox</label>
              <label><input type="radio" name="checkoutMode" value="stripe"> Stripe Test</label>
            </div>
          </div>
          <button class="btn btn--primary" id="checkoutBtn" data-i18n="topupCheckout">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –æ–ø–ª–∞—Ç–∏</button>
        </div>
        <div class="summary" id="topupSummary"></div>
      </div>
    </section>

    <section class="panel hidden" data-panel="market">
      <div class="panel__head">
        <div class="panel__left">
          <div class="panel__title" data-i18n="marketFilters">–ü–æ—à—É–∫ / —Ñ—ñ–ª—å—Ç—Ä –ª–æ—Ç—ñ–≤</div>
          <div class="panel__muted" id="marketDisclaimer" data-i18n="marketDisclaimer">–õ–æ—Ç–∏ –¥–ª—è –ø—Ä–µ–≤'—é.</div>
        </div>
      </div>
      <div class="panel__body">
        <div class="grid grid--2">
          <input id="listingSearch" class="input" type="search" data-i18n-placeholder="marketSearchPlaceholder" placeholder="–ü–æ—à—É–∫" />
          <select id="listingType" class="select">
            <option value="">All</option>
            <option value="Skin">Skin</option>
            <option value="Case">Case</option>
            <option value="Currency">Currency</option>
            <option value="Account">Account</option>
          </select>
        </div>
        <div id="listingWrap" class="marketlist"></div>
      </div>
    </section>

    <section class="panel">
      <div class="panel__body">
        <div class="list">
          <strong>Stripe Checkout (Test)</strong>: POST /api/create-checkout-session ‚Üí success.html / cancel.html.
          <br />Serverless: Vercel / Netlify Functions / Firebase / Supabase Edge.
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="site-footer__wrap">
      <div class="footer__brand">
        <div class="brand__logo">GF</div>
        <div>
          <div class="footer__title">¬© GameForest ‚Äî All rights reserved</div>
          <div class="footer__disclaimer" data-i18n="footerDisclaimer">–°—Ç–∞–±—ñ–ª—å–Ω—ñ –æ–±–∫–ª–∞–¥–∏–Ω–∫–∏ SteamStatic. –î–∞–Ω—ñ –∫–µ—à—É—é—Ç—å—Å—è, –ø—Ä–æ–¥–∞–∫—à–µ–Ω-—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –Ω–µ –ø–æ—Ç—Ä–µ–±—É—î —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π.</div>
        </div>
      </div>
      <div>
        <div class="footer__payments">
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#7cc8ff" font-weight="700" font-size="10">VISA</text></svg>Visa</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#f4c16c" font-weight="700" font-size="10">MC</text></svg>MasterCard</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#7cc8ff" font-weight="700" font-size="10">PP</text></svg>PayPal</span>
          <span class="payicon"><svg viewBox="0 0 36 24" aria-hidden="true"><rect x="2" y="4" width="32" height="16" rx="3" fill="#0d1722" stroke="#1b2532"/><text x="18" y="16" text-anchor="middle" fill="#52c99f" font-weight="700" font-size="10">‚Çø</text></svg>Crypto</span>
        </div>
        <div class="footer__legal">–í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ –∞–≤–∞—Ç–∞—Ä —Ç–∞ email, –ø—Ä–∏–π–º–∞—î–º–æ –≤–∞–ª—é—Ç–∏, –ø–æ–∫–∞–∑—É—î–º–æ —Ä–µ–∞–ª—å–Ω—ñ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ª–æ—Ç—ñ–≤.</div>
      </div>
    </div>
  </footer>

  <div class="modal hidden" id="authModal">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__card">
      <div class="modal__head">
        <div class="modal__title" id="authTitle">Auth</div>
        <button class="iconbtn" data-close="1">‚úï</button>
      </div>
      <div class="modal__body" id="authBody"></div>
    </div>
  </div>

  <div class="modal hidden" id="pitchModal">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__card modal__card--wide">
      <div class="modal__head">
        <div class="modal__title" id="pitchTitle">Pitch deck</div>
        <button class="iconbtn" data-close="1">‚úï</button>
      </div>
      <div class="modal__body" id="pitchBody"></div>
    </div>
  </div>

  <div class="modal hidden" id="checkoutModal">
    <div class="modal__backdrop" data-close="1"></div>
    <div class="modal__card modal__card--wide">
      <div class="modal__head">
        <div class="modal__title" data-i18n="checkoutDemoTitle">–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–ø–ª–∞—Ç–∏</div>
        <button class="iconbtn" data-close="1">‚úï</button>
      </div>
      <div class="modal__body" id="checkoutBody"></div>
    </div>
  </div>

  <script src="./i18n.js"></script>
  <script src="./supabase-config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.44.4/dist/umd/supabase.min.js"></script>
  <script src="./auth.js"></script>
  <script src="./shell.js"></script>
  <script src="./market-data.js"></script>
  <script src="./market.js"></script>
</body>
</html>
